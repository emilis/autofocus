<%

var {lists, log} = vars;
lists = lists || [];
log = log || [];

%>
<div id="list">
    <div id="tasks">
        <h2>Task lists:</h2>
        <ul><%

        for each (var list in lists) {
            print('<li><a href="/?call=Autofocus.showList&id=', list.id, '">', list.title, '</a></li>');
        }

        %></ul>

        <form method="post" action="/" class="miniform">
        <input type="hidden" name="call" value="Autofocus.addList">
        <label>Add new task list:</label>
        <input id="title" name="title">
        </form>
    </div>
    <div id="log">
        <h2>Combined log:</h2>
        <table id="log-table"><tbody><%

            for each (var entry in log) {
                print('<tr>');
                print('<td class="time">', entry.time.getHours(), ':', entry.time.getMinutes(), '</td>');
                print('<td class="', entry.action, '">', entry.action, '</td>');
                print('<td>', entry.details, '</td>');
                print('</tr>');
            }

        %>
        </tbody></table>
    </div>
</div>
